{% extends "base/class.php.twig" %}

{% set services = [{
class: 'Drupal\\Core\\Config\\ConfigManagerInterface',
camel_case_name: 'configManager'
}] %}

{% block file_path %}
\Drupal\{{module}}\Form\{{ entity_class }}DeleteForm.
{% endblock %}

{% block namespace_class %}
namespace Drupal\{{module}}\Form;
{% endblock %}

{% block use_class %}
use Drupal\Core\Config\ConfigManagerInterface;
use Drupal\Core\Entity\EntityConfirmFormBase;
use Drupal\Core\Entity\EntityDeleteFormTrait;
use Drupal\Core\Form\FormStateInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;
{% endblock %}
{% block use_class_services %}{% endblock %}

{% block class_declaration %}
/**
 * Builds the form to delete {{ label }} entities.
 */
class {{ entity_class }}DeleteForm extends EntityConfirmFormBase {% endblock %}

{% block use_trait %}
  use EntityDeleteFormTrait;

{% endblock %}

{% block class_construct %}

  /**
   * Constructs a new entity deletion form.
   *
   * @param \Drupal\Core\Config\ConfigManagerInterface $configManager
   *   The configuration manager.
   */
  public function __construct(ConfigManagerInterface $configManager) {
    $this->configManager = $configManager;
  }

{% endblock %}

{% block class_create %}
  /**
   * {@inheritdoc}
   */
  public static function create(ContainerInterface $container) {
    return new static($container->get('config.manager'));
  }
{% endblock %}

{% block class_methods %}

  /**
   * {@inheritdoc}
   */
  public function buildForm(array $form, FormStateInterface $form_state) {
    $form = parent::buildForm($form, $form_state);

    /** @var \Drupal\Core\Config\Entity\ConfigEntityInterface $entity */
    $entity = $this->getEntity();

    $this->addDependencyListsToForm(
      $form,
      $entity->getConfigDependencyKey(),
      [$entity->getConfigDependencyName()],
      $this->configManager,
      $this->entityManager
    );

    return $form;
  }
{% endblock %}
